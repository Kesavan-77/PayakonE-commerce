{"ast":null,"code":"// cartReducer.js\nexport default function CartReducer(state, action) {\n  if (!state) {\n    // Initial state with a 'cart' property\n    state = {\n      cart: [] // Other properties in your state...\n\n    };\n  }\n\n  if (action.type === \"ADD_TO_CART\") {\n    const {\n      amount,\n      product\n    } = action.payload; // Check if the product is already in the cart\n\n    const existingProduct = state.cart.find(item => item.id === product.id);\n\n    if (existingProduct) {\n      // If the product is already in the cart, update the quantity\n      const updatedCart = state.cart.map(item => item.id === product.id ? { ...item,\n        amount: item.amount + amount > existingProduct.stock ? existingProduct.stock : item.amount + amount\n      } : item);\n      return { ...state,\n        cart: updatedCart\n      };\n    } else {\n      // If the product is not in the cart, add it\n      const cartProduct = {\n        id: product.id,\n        name: product.name,\n        company: product.company,\n        price: product.price,\n        image: product.image,\n        amount,\n        stock: product.stock\n      };\n      return { ...state,\n        cart: [...state.cart, cartProduct]\n      };\n    }\n  }\n\n  if (action.type === \"SET_DECREMENT\") {\n    let updatedProduct = state.cart.map(curElem => {\n      if (curElem.id === action.payload) {\n        let decAmount = curElem.amount - 1;\n\n        if (decAmount <= 1) {\n          decAmount = 1;\n        }\n\n        return { ...curElem,\n          amount: decAmount\n        };\n      } else {\n        return curElem;\n      }\n    });\n    return { ...state,\n      cart: updatedProduct\n    };\n  }\n\n  if (action.type === \"SET_INCREMENT\") {\n    let updatedProduct = state.cart.map(curElem => {\n      if (curElem.id === action.payload) {\n        let incAmount = curElem.amount + 1;\n\n        if (incAmount >= curElem.stock) {\n          incAmount = curElem.stock;\n        }\n\n        return { ...curElem,\n          amount: incAmount\n        };\n      } else {\n        return curElem;\n      }\n    });\n    return { ...state,\n      cart: updatedProduct\n    };\n  }\n\n  if (action.type === \"REMOVE_ITEM\") {\n    const updatedCart = state.cart.filter(currEle => currEle.id !== action.payload);\n    return { ...state,\n      cart: updatedCart\n    };\n  }\n\n  if (action.type === \"CART_TOTAL\") {\n    let total_amount = state.cart.reduce((acc, currEle) => {\n      let {\n        price,\n        amount\n      } = currEle;\n      acc = acc + price * amount;\n      return acc;\n    }, 0);\n    return { ...state,\n      total_amount\n    };\n  }\n\n  if (action.type === \"CLEAR_CART\") {\n    return { ...state,\n      cart: []\n    };\n  }\n\n  return state;\n}\n_c = CartReducer;\n\nvar _c;\n\n$RefreshReg$(_c, \"CartReducer\");","map":{"version":3,"names":["CartReducer","state","action","cart","type","amount","product","payload","existingProduct","find","item","id","updatedCart","map","stock","cartProduct","name","company","price","image","updatedProduct","curElem","decAmount","incAmount","filter","currEle","total_amount","reduce","acc"],"sources":["/home/kesavan-vel/Documents/Yo/React/E-Commerce/payakanMart/src/reducer/CartReducer.js"],"sourcesContent":["// cartReducer.js\n\nexport default function CartReducer(state, action) {\n  if (!state) {\n    // Initial state with a 'cart' property\n    state = {\n      cart: [],\n      // Other properties in your state...\n    };\n  }\n  if (action.type === \"ADD_TO_CART\") {\n    const { amount, product } = action.payload;\n\n    // Check if the product is already in the cart\n    const existingProduct = state.cart.find((item) => item.id === product.id);\n    if (existingProduct) {\n      // If the product is already in the cart, update the quantity\n      const updatedCart = state.cart.map((item) =>\n        item.id === product.id ? { ...item, amount: item.amount + amount > existingProduct.stock? existingProduct.stock :  item.amount + amount } : item\n      );\n\n      return {\n        ...state,\n        cart: updatedCart,\n      };\n    } else {\n      // If the product is not in the cart, add it\n      const cartProduct = {\n        id: product.id,\n        name: product.name,\n        company: product.company,\n        price: product.price,\n        image: product.image,\n        amount,\n        stock: product.stock,\n      };\n\n      return {\n        ...state,\n        cart: [...state.cart, cartProduct],\n      };\n    }\n  }\n\n\n  if (action.type === \"SET_DECREMENT\") {\n    let updatedProduct = state.cart.map((curElem) => {\n      if (curElem.id === action.payload) {\n        let decAmount = curElem.amount - 1;\n\n        if (decAmount <= 1) {\n          decAmount = 1;\n        }\n\n        return {\n          ...curElem,\n          amount: decAmount,\n        };\n      } else {\n        return curElem;\n      }\n    });\n    return { ...state, cart: updatedProduct };\n  }\n\n  if (action.type === \"SET_INCREMENT\") {\n    let updatedProduct = state.cart.map((curElem) => {\n      if (curElem.id === action.payload) {\n        let incAmount = curElem.amount + 1;\n        if (incAmount >= curElem.stock) {\n          incAmount = curElem.stock;\n        }\n        return {\n          ...curElem,\n          amount: incAmount,\n        };\n      } else {\n        return curElem;\n      }\n    });\n    return { ...state, cart: updatedProduct };\n  }\n\n  if (action.type === \"REMOVE_ITEM\") {\n    const updatedCart = state.cart.filter((currEle) => currEle.id !== action.payload);\n    return {\n      ...state,\n      cart: updatedCart,\n    };\n  }\n\n  if(action.type === \"CART_TOTAL\"){\n    let total_amount = state.cart.reduce((acc, currEle)=>{\n      let {price,amount} = currEle;\n      acc = acc + price * amount;\n      return acc;\n    },0);\n    return {\n      ...state,\n      total_amount,\n    }\n  }\n\n  if(action.type === \"CLEAR_CART\"){\n    return{\n      ...state,\n      cart:[],\n    }\n  }\n\n  return state;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}