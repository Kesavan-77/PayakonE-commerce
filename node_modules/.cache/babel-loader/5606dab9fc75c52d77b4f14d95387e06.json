{"ast":null,"code":"// cartReducer.js\nexport default function CartReducer(state, action) {\n  if (action.type === \"ADD_TO_CART\") {\n    const {\n      amount,\n      product\n    } = action.payload; // Check if the product is already in the cart\n\n    const existingProduct = state.cart.find(item => item.id === product.id);\n    console.log(\"exist:\", existingProduct);\n\n    if (existingProduct) {\n      // If the product is already in the cart, update the quantity\n      const updatedCart = state.cart.map(item => item.id === product.id ? { ...item,\n        amount: item.amount + amount > existingProduct.stock ? existingProduct.stock : item.amount + amount\n      } : item);\n      return { ...state,\n        cart: updatedCart\n      };\n    } else {\n      // If the product is not in the cart, add it\n      const cartProduct = {\n        id: product.id,\n        name: product.name,\n        company: product.company,\n        price: product.price,\n        image: product.image,\n        amount,\n        stock: product.stock\n      };\n      return { ...state,\n        cart: [...state.cart, cartProduct]\n      };\n    }\n  }\n\n  if (action.type === \"REMOVE_ITEM\") {\n    const updatedCart = state.cart.filter(currEle => currEle.id !== action.payload);\n    return { ...state,\n      cart: updatedCart\n    };\n  }\n\n  if (action.type === \"CART_TOTAL\") {\n    let total_amount = state.cart.reduce((acc, currEle) => {\n      let {\n        price,\n        amount\n      } = currEle;\n      acc = acc + price * amount;\n    }, 0);\n  }\n\n  return state;\n}\n_c = CartReducer;\n\nvar _c;\n\n$RefreshReg$(_c, \"CartReducer\");","map":{"version":3,"names":["CartReducer","state","action","type","amount","product","payload","existingProduct","cart","find","item","id","console","log","updatedCart","map","stock","cartProduct","name","company","price","image","filter","currEle","total_amount","reduce","acc"],"sources":["/home/kesavan-vel/Documents/Yo/React/E-Commerce/payakanMart/src/reducer/CartReducer.js"],"sourcesContent":["// cartReducer.js\n\nexport default function CartReducer(state, action) {\n  if (action.type === \"ADD_TO_CART\") {\n    const { amount, product } = action.payload;\n\n    // Check if the product is already in the cart\n    const existingProduct = state.cart.find((item) => item.id === product.id);\n    console.log(\"exist:\",existingProduct)\n    if (existingProduct) {\n      // If the product is already in the cart, update the quantity\n      const updatedCart = state.cart.map((item) =>\n        item.id === product.id ? { ...item, amount: item.amount + amount > existingProduct.stock? existingProduct.stock :  item.amount + amount } : item\n      );\n\n      return {\n        ...state,\n        cart: updatedCart,\n      };\n    } else {\n      // If the product is not in the cart, add it\n      const cartProduct = {\n        id: product.id,\n        name: product.name,\n        company: product.company,\n        price: product.price,\n        image: product.image,\n        amount,\n        stock: product.stock,\n      };\n\n      return {\n        ...state,\n        cart: [...state.cart, cartProduct],\n      };\n    }\n  }\n\n  if (action.type === \"REMOVE_ITEM\") {\n    const updatedCart = state.cart.filter((currEle) => currEle.id !== action.payload);\n    return {\n      ...state,\n      cart: updatedCart,\n    };\n  }\n\n  if(action.type === \"CART_TOTAL\"){\n    let total_amount = state.cart.reduce((acc, currEle)=>{\n      let {price,amount} = currEle;\n      acc = acc + price * amount;\n    },0)\n  }\n\n  return state;\n}\n"],"mappings":"AAAA;AAEA,eAAe,SAASA,WAAT,CAAqBC,KAArB,EAA4BC,MAA5B,EAAoC;EACjD,IAAIA,MAAM,CAACC,IAAP,KAAgB,aAApB,EAAmC;IACjC,MAAM;MAAEC,MAAF;MAAUC;IAAV,IAAsBH,MAAM,CAACI,OAAnC,CADiC,CAGjC;;IACA,MAAMC,eAAe,GAAGN,KAAK,CAACO,IAAN,CAAWC,IAAX,CAAiBC,IAAD,IAAUA,IAAI,CAACC,EAAL,KAAYN,OAAO,CAACM,EAA9C,CAAxB;IACAC,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAqBN,eAArB;;IACA,IAAIA,eAAJ,EAAqB;MACnB;MACA,MAAMO,WAAW,GAAGb,KAAK,CAACO,IAAN,CAAWO,GAAX,CAAgBL,IAAD,IACjCA,IAAI,CAACC,EAAL,KAAYN,OAAO,CAACM,EAApB,GAAyB,EAAE,GAAGD,IAAL;QAAWN,MAAM,EAAEM,IAAI,CAACN,MAAL,GAAcA,MAAd,GAAuBG,eAAe,CAACS,KAAvC,GAA8CT,eAAe,CAACS,KAA9D,GAAuEN,IAAI,CAACN,MAAL,GAAcA;MAAxG,CAAzB,GAA4IM,IAD1H,CAApB;MAIA,OAAO,EACL,GAAGT,KADE;QAELO,IAAI,EAAEM;MAFD,CAAP;IAID,CAVD,MAUO;MACL;MACA,MAAMG,WAAW,GAAG;QAClBN,EAAE,EAAEN,OAAO,CAACM,EADM;QAElBO,IAAI,EAAEb,OAAO,CAACa,IAFI;QAGlBC,OAAO,EAAEd,OAAO,CAACc,OAHC;QAIlBC,KAAK,EAAEf,OAAO,CAACe,KAJG;QAKlBC,KAAK,EAAEhB,OAAO,CAACgB,KALG;QAMlBjB,MANkB;QAOlBY,KAAK,EAAEX,OAAO,CAACW;MAPG,CAApB;MAUA,OAAO,EACL,GAAGf,KADE;QAELO,IAAI,EAAE,CAAC,GAAGP,KAAK,CAACO,IAAV,EAAgBS,WAAhB;MAFD,CAAP;IAID;EACF;;EAED,IAAIf,MAAM,CAACC,IAAP,KAAgB,aAApB,EAAmC;IACjC,MAAMW,WAAW,GAAGb,KAAK,CAACO,IAAN,CAAWc,MAAX,CAAmBC,OAAD,IAAaA,OAAO,CAACZ,EAAR,KAAeT,MAAM,CAACI,OAArD,CAApB;IACA,OAAO,EACL,GAAGL,KADE;MAELO,IAAI,EAAEM;IAFD,CAAP;EAID;;EAED,IAAGZ,MAAM,CAACC,IAAP,KAAgB,YAAnB,EAAgC;IAC9B,IAAIqB,YAAY,GAAGvB,KAAK,CAACO,IAAN,CAAWiB,MAAX,CAAkB,CAACC,GAAD,EAAMH,OAAN,KAAgB;MACnD,IAAI;QAACH,KAAD;QAAOhB;MAAP,IAAiBmB,OAArB;MACAG,GAAG,GAAGA,GAAG,GAAGN,KAAK,GAAGhB,MAApB;IACD,CAHkB,EAGjB,CAHiB,CAAnB;EAID;;EAED,OAAOH,KAAP;AACD;KApDuBD,W"},"metadata":{},"sourceType":"module"}