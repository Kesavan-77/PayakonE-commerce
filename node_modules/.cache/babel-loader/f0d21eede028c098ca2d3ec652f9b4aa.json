{"ast":null,"code":"import _toConsumableArray from\"/home/kesavan-vel/Documents/Yo/React/E-Commerce/payakanMart/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/home/kesavan-vel/Documents/Yo/React/E-Commerce/payakanMart/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// cartReducer.js\nexport default function CartReducer(state,action){if(!state){// Initial state with a 'cart' property\nstate={cart:[]// Other properties in your state...\n};}if(action.type===\"ADD_TO_CART\"){var _action$payload=action.payload,amount=_action$payload.amount,product=_action$payload.product;// Check if the product is already in the cart\nvar existingProduct=state.cart.find(function(item){return item.id===product.id;});if(existingProduct){// If the product is already in the cart, update the quantity\nvar updatedCart=state.cart.map(function(item){return item.id===product.id?_objectSpread(_objectSpread({},item),{},{amount:item.amount+amount>existingProduct.stock?existingProduct.stock:item.amount+amount}):item;});return _objectSpread(_objectSpread({},state),{},{cart:updatedCart});}else{// If the product is not in the cart, add it\nvar cartProduct={id:product.id,name:product.name,company:product.company,price:product.price,image:product.image,amount:amount,stock:product.stock};return _objectSpread(_objectSpread({},state),{},{cart:[].concat(_toConsumableArray(state.cart),[cartProduct])});}}if(action.type===\"SET_DECREMENT\"){var updatedProduct=state.cart.map(function(curElem){if(curElem.id===action.payload){var decAmount=curElem.amount-1;if(decAmount<=1){decAmount=1;}return _objectSpread(_objectSpread({},curElem),{},{amount:decAmount});}else{return curElem;}});return _objectSpread(_objectSpread({},state),{},{cart:updatedProduct});}if(action.type===\"SET_INCREMENT\"){var _updatedProduct=state.cart.map(function(curElem){if(curElem.id===action.payload){var incAmount=curElem.amount+1;if(incAmount>=curElem.stock){incAmount=curElem.stock;}return _objectSpread(_objectSpread({},curElem),{},{amount:incAmount});}else{return curElem;}});return _objectSpread(_objectSpread({},state),{},{cart:_updatedProduct});}if(action.type===\"REMOVE_ITEM\"){var _updatedCart=state.cart.filter(function(currEle){return currEle.id!==action.payload;});return _objectSpread(_objectSpread({},state),{},{cart:_updatedCart});}if(action.type===\"CART_TOTAL\"){var total_amount=state.cart.reduce(function(acc,currEle){var price=currEle.price,amount=currEle.amount;acc=acc+price*amount;return acc;},0);return _objectSpread(_objectSpread({},state),{},{total_amount:total_amount});}if(action.type===\"CLEAR_CART\"){return _objectSpread(_objectSpread({},state),{},{cart:[]});}return state;}","map":{"version":3,"names":["CartReducer","state","action","cart","type","payload","amount","product","existingProduct","find","item","id","updatedCart","map","stock","cartProduct","name","company","price","image","updatedProduct","curElem","decAmount","incAmount","filter","currEle","total_amount","reduce","acc"],"sources":["/home/kesavan-vel/Documents/Yo/React/E-Commerce/payakanMart/src/reducer/CartReducer.js"],"sourcesContent":["// cartReducer.js\n\nexport default function CartReducer(state, action) {\n  if (!state) {\n    // Initial state with a 'cart' property\n    state = {\n      cart: [],\n      // Other properties in your state...\n    };\n  }\n  if (action.type === \"ADD_TO_CART\") {\n    const { amount, product } = action.payload;\n\n    // Check if the product is already in the cart\n    const existingProduct = state.cart.find((item) => item.id === product.id);\n    if (existingProduct) {\n      // If the product is already in the cart, update the quantity\n      const updatedCart = state.cart.map((item) =>\n        item.id === product.id ? { ...item, amount: item.amount + amount > existingProduct.stock? existingProduct.stock :  item.amount + amount } : item\n      );\n\n      return {\n        ...state,\n        cart: updatedCart,\n      };\n    } else {\n      // If the product is not in the cart, add it\n      const cartProduct = {\n        id: product.id,\n        name: product.name,\n        company: product.company,\n        price: product.price,\n        image: product.image,\n        amount,\n        stock: product.stock,\n      };\n\n      return {\n        ...state,\n        cart: [...state.cart, cartProduct],\n      };\n    }\n  }\n\n\n  if (action.type === \"SET_DECREMENT\") {\n    let updatedProduct = state.cart.map((curElem) => {\n      if (curElem.id === action.payload) {\n        let decAmount = curElem.amount - 1;\n\n        if (decAmount <= 1) {\n          decAmount = 1;\n        }\n\n        return {\n          ...curElem,\n          amount: decAmount,\n        };\n      } else {\n        return curElem;\n      }\n    });\n    return { ...state, cart: updatedProduct };\n  }\n\n  if (action.type === \"SET_INCREMENT\") {\n    let updatedProduct = state.cart.map((curElem) => {\n      if (curElem.id === action.payload) {\n        let incAmount = curElem.amount + 1;\n        if (incAmount >= curElem.stock) {\n          incAmount = curElem.stock;\n        }\n        return {\n          ...curElem,\n          amount: incAmount,\n        };\n      } else {\n        return curElem;\n      }\n    });\n    return { ...state, cart: updatedProduct };\n  }\n\n  if (action.type === \"REMOVE_ITEM\") {\n    const updatedCart = state.cart.filter((currEle) => currEle.id !== action.payload);\n    return {\n      ...state,\n      cart: updatedCart,\n    };\n  }\n\n  if(action.type === \"CART_TOTAL\"){\n    let total_amount = state.cart.reduce((acc, currEle)=>{\n      let {price,amount} = currEle;\n      acc = acc + price * amount;\n      return acc;\n    },0);\n    return {\n      ...state,\n      total_amount,\n    }\n  }\n\n  if(action.type === \"CLEAR_CART\"){\n    return{\n      ...state,\n      cart:[],\n    }\n  }\n\n  return state;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}